<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<HTML>

<HEAD>

	<meta charset="utf-8"/>
	<meta name="description" content="Paleomagnetism.org: An open source tool for paleomagnetic analysis">
	<meta name="keywords" content="Paleomagnetism, Palaeomagnetism, Statistics, Analysis, Javascript, Magnetic, Zijderveld">
	<meta name="author" content="Paleomagnetism.org">
	
	<!-- Stylesheets -->
	<link href="./src/libs/jQuery/jquery-ui.css" rel="stylesheet"> <!-- jQuery UI stylesheet -->
	<link href="./css/paldir.css" type="text/css" rel="stylesheet" /> <!-- paleomagnetism.org Interpretation Portal Stylesheet -->
	<link href="./css/pMagJS.css" type="text/css" rel="stylesheet" /> <!-- paleomagnetism.org Stylesheet -->
	<link href="./src/libs/notiny-master/src/notiny.css" rel="stylesheet"> <!-- Notification style sheet (Notiny) -->

	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/s/ju/dt-1.10.10/datatables.min.css"/>

	<!-- Supporting Libraries -->
	<script src="./src/libs/jQuery/jquery-1.11.1.js"></script> <!-- jQuery -->
	<script src="./src/libs/jQuery/jquery-ui.js"></script> <!-- jQuery UI -->
	<script src="./src/libs/notiny-master/src/notiny.js"></script> <!-- (notiny) notification plugin -->
	<script src="./src/libs/Highcharts/highcharts.src.js"></script> <!-- Highcharts Main -->
	<script src="./src/libs/Highcharts/highcharts-more.src.js"></script> <!-- Highcharts plugin for extra graphs -->
	<script src="./src/libs/Highcharts/heatmap.src.js"></script> <!-- HighCharts HeatMap Plugin -->
	<script src="./src/libs/Highcharts/exporting.src.js"></script> <!-- Highcharts figure exporting -->
	<script src="./src/libs/numeric-1.2.6.js"></script> <!-- Numeric JS to calculate principle components -->
	<script src="./src/libs/jQuery/jquery.multiselect.js"></script> <!-- jQuery plugin for multiselect -->
	
	<!-- Paleomagnetism.org functions -->
	<script src="./src/core.js"></script> <!-- Paleomagnetism.org Core Functions -->
	<script src="./src/paldir.js"></script> <!-- Main Script for Interpretation Portal -->


	<script type="text/javascript" src="https://cdn.datatables.net/s/ju/dt-1.10.10/datatables.min.js"></script>

	<link rel="shortcut icon" type="image/x-icon" href="images/icon.ico" />
	<title> Paleomagnetism.org - Interpretation Portal </title>
	
	<!-- Google Analytics -->
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-68024347-1', 'auto');
	ga('send', 'pageview');
	</script>
		
</HEAD>

<BODY>
	<div id="body_container" style="text-align: justify;">
	
		<div id="input" class="dialog" title="Data Input">
			<h1> Select an input format </h1>
			Below is a list of the currently supported data formats that can be imported to the application. If you would like your institutions format added, please contact us.
			<p>
			<select id="importFormats" title="Select an importing format" style="text-align: center; width: 150px;">
				<option value="UTRECHT"> Utrecht (.TH, .AF) </option>
				<option value="MUNICH"> Munich </option>
				<!-- <option value="SPINNER"> Spinner </option> -->
				<!-- <option value="DEFAULT"> Default </option> -->
			</select>
			<button id="import" type="button" onClick="$('#file-type').click();" title="Import a previously exported file.">Import Demagnetization Data </button>
			<p> <input type="checkbox" id="appendFlag"><label for="appendFlag"> Append import to existing data </label>
		</div>
		
		<!-- HEADER -->
		<div id="title" style="margin: 0 auto; padding: 5px; background-color: #fff">
			<div style="display: inline-block; padding-right: 10px;">
				<img style="margin: 0px; height: 60px;" src="./images/icon.png">
			</div>
		</div>
		
		<!-- MENU CONTACT -->
		<div style="background-color: #7798BF; color: white; padding: 10px;">
			<li class="menuLink"><a class="link" href="./index.html"> Home </a>
			<li class="menuLink"><a class="link" style="background: #DED;"><img src="./images/icon.ico" height="16" width="16" style="vertical-align: middle;">&nbsp Interpretation Portal </a>
			<li class="menuLink"><a class="link" href="./statistics.html"> Statistics Portal </a>
			<li class="menuLink"><a class="link" href="./miscellaneous.html"> Miscellaneous Portal </a> 
			<li class="menuLink"><a class="link" href="./cite.html"> References </a>
			<li class="menuLink"><a class="link" href="./team.html"> Team and Code </a>
		<!-- <li class="menuLink"><a class="link" href="mailto:fort@paleomagnetism.org"> Contact </a> -->
		<li class="menuLink"><a class="link" href="mailto:paleomagnetism.org@gmail.com" title="temporary address"> Contact </a>
		</div>
		<div id="control" style="border: 1px dotted rgb(119, 152, 191); margin: 5px; padding: 0px; font-size: 10px;">
			<table class="sample">
				<div style="position: absolute; padding: 5px"><button id="hideControls" style="height: 20px;"></button></div>
				<thead> <th> Navigation </th> <th> PCA Line (Forced) </th> <th> Projection (W/Up-N/Up) </th> <th> Specimen Coordinates </th> <th> Tectonic Coordinates </th> <th> PCA Great Circle (Forced) </th> <th> Step Visibility </th> <th> Step Selection </th> </thead>
				<tbody> <td> Arrow Keys or WSDA </td> <td> 1 (2) </td> <td> 3 (toggle) </td> <td> 7 (toggle) </td> <td> 8 (toggle) </td> <td> 9 (0) </td> <td> z or - </td> <td> x or + </td> </tbody>
			</table>
		</div>
		<div id="tabs">
			<ul>
				<li><a href="#homeTab" title="Home"> Home </a></li>
				<li><a href="#interpretationTab" title="General information"> Interpretation </a></li>
				<li><a href="#fittingTab" title="General information"> Direction Fitting </a></li>
				<li><a href="#advancedTab" title="General information"> Advanced Options </a></li>
				<li><a href="#magicTab" title="General information"> Raw Magic Exporting </a></li>
			</ul>
	
			<div id="homeTab">
				<div class="information">
					<h1>Interpretation Portal: Home  </h1>
					<p> Welcome to the interpretation portal of Paleomagnetism.org; an online environment for paleomagnetic interpretation.
					<p> New demagnetization data can be added to the application by clicking the <b> add demagnetization data </b> button below. Once new data has been added, the data can be visualized and interpreted in the interpretation module.
					<div style="text-align: center;">
						<button id="add" style="margin: 10px; height: 50px; width: 200px; border: 1px solid; " title="Load new data to the application"> Add Demagnetization Data </button>
					</div>
					<h2> Example Data </h2>
					<p> <b> Note: </b> Currently, the only supported format for direct input is the <a href="./examples/Utrecht_Example.AF" download>Utrecht Format</a>. This file can be used as an example to test the application usage.
					<p> An example for an exported data file from the application can be found <a href="./examples/dir_example.dir" download> here</a>. This file can be imported in the advanced options tab.
					<p> If you wish your format to be added, please send us an example of your input format or write your own data parser. Multiple parameters are required: <b> name, step, dec, inc, int (x, y, z) </b> and we recommend adding core and bedding orientations for rotation between specimen/geographic/tectonic coordinates.
				</div>
			</div>
			<div id="interpretationTab">
				<!-- HTML FOR SPECIMEN SCROLLER -->
				<div id="specimenScroller" style="border: 1px dotted rgb(119, 152, 191); width: 400px; margin: 0 auto; padding: 10px;">
					<div id="specimenScrollerInner">
						<button id="left" style="font-family: times;"><span style="font-size: 22px;">  <  </span></button>
						<select multiple id="specimens"></select>
						<button id="right" style="font-family: times;"><span style="font-size: 22px;">  > </span></button>
					</div>
				</div>
				<input style="display: none" id="file-type" type="file" size="4" name="file" onChange="importing(event)"/>
				<input style="display: none" id="file-type2" type="file" size="4" name="file" onChange="importing(event, 'APP')"/>
				<p>

					<!-- HIDDEN CHECKBOXES FOR ANCHORING/TC/PROJECTION, TOGGLED BY KEYBOARD -->
					<input type="checkbox" id="anchor" style="display: none;">
					<input type="checkbox" id="tcFlag" style="display: none;">
					<input type="checkbox" id="tcViewFlag" style="display: none;">
					<input type="checkbox" id="nFlag" style="display: none;">
					<input type="checkbox" id="specFlag" style="display: none;">
					<button id="PCA" style="display: none">Start PCA</button>
					<button id="PCAGC" style="display: none">Start PCA GC</button>
				
					<!-- MAIN BODY FOR INTERPRETATION -->
					<div id="appBody" style="display: none; text-align: center; margin: 0 auto;">
						<div id="stepWalk" style="height: 550px; width: 100px; display: inline-block; padding: 2px; vertical-align: top; margin-left: 10px; border: 1px dotted rgb(119, 152, 191);"><p><h2>Steps</h2>
						<select id='demagType' style="height: 20px; width: 60px; padding: 0px; margin: 0 auto;">
							<option value='UNKNOWN'> --- </option>
							<option value='TH'>TH</option>
							<option value='AF'>AF</option>
						</select><p>
						<p class="steps"></p>
						</div>
							<div style="border: 1px dotted rgb(119, 152, 191); display: inline-block; float: center; padding: 2px;">
								<div id="zijderveldPlot" style="width: 500px; height: 550px;"></div>
							</div>
							<div style="border: 1px dotted rgb(119, 152, 191); display: inline-block; float: center; padding: 2px;">
								<div id="eqAreaDirections" style="width: 500px; height: 550px;"></div>
							</div>
						<br>
						<hr>
						<div id="update"></div>
						<hr>
						<div id="clrIntBox" style="text-align: center; display: none;">
							<button id="clrInterpretation">Clear Interpretation</button>
						</div>
						<p>
						</div>
						<div id="intensityPlot" style="display: none; width: auto; height: 500px; margin: 0 auto; border: 1px dotted rgb(119, 152, 191);"></div>
						<small> <b> Note: </b> intensity is divided by default specimen volume (10.5 cc). </small>
						<p>
						<!--
						<table style="border: 1px dotted rgb(119, 152, 191); width: 800px; margin: 0 auto; text-align: center;">
						<thead>
							<th><b> Sample Class </b></th>
							<th><b> Sample Lithology </b></th>
							<th><b> Sample Type </b></th>
						</thead>
						<tbody>
						<td>
						<select class="additionalOptions" id="sampleClass">
							<option value="Sedimentary">Sedimentary</option>
						</select>
						</td>
						<td>
						<select class="additionalOptions" id="sampleLithology">
							<option value="Winonaite Primitive Achondrite">Winonaite Primitive Achondrite</option>
						</select>
						</td>
						<td>
						<select class="additionalOptions" id="sampleType">
							<option value="Sediment Layer">Sediment Layer</option>
						</select>
							</td>
						</tbody>
						</table>
						-->
			</div>
	
			<!-- DIRECTION FITTING TAB -->
			<div id="fittingTab">
				<div style="margin: 0 auto; text-align: center;">
					<div id="fitCirclesDiv" style="display: none; ">
						<div id="fitCirclesDivText"></div>
						<p> 
						<button id="fitCircles" style="height: 50px; width: 200px; font-size: 16px;"> Fit Great Circles </button>
					</div>
					<div id="coordinates" title="Coordinate Reference Frame" class="updateDir" style="display: inline-block;">
						<input type="radio" id="radio1" value="TECT" name="radio"> <label for="radio1"> Tectonic Coordinates </label>
						<input type="radio" id="radio2" value="GEO" name="radio" checked> <label for="radio2"> Geographic Coordinates </label>
					</div>
				</div>
				<p>
				<div id="fittingTable" style="display: none; text-align: center; margin: 0 auto; border: 1px dotted rgb(119, 152, 191);"></div>
				<p>
				<div id="fittingContainer" style="width: auto;text-align: center; margin: 0 auto; border: 1px dotted rgb(119, 152, 191);">
					<div id="eqAreaInterpretations" style="width: 500px; height: 650px; display: inline-block;"></div>
					<div id="eqAreaFitted" style="width: 500px; height: 650px; display: none;"></div>
				</div>
				<div style="text-align: center;">
					<p> <button id="saveInterpretation" style="width: 200px; height: 50px;">Save Interpreted Directions</button>
					<p><small> Interpretations are saved to the Statistics Portal </small>
				</div>
			</div>
			
			<!-- ADVANCED OPTIONS TAB -->
			<div id="advancedTab">
				<div class="information">
					<h1>Interpretation Portal: Advanced Options</h1>
					<h2> Importing and Exporting </h2>
					<p> 
					<!-- Exporting -->
					<button id="exportApplication" type="button" onClick="exporting()" title="Import a previously exported file.">Export Application Save</button>
					<button id="importApplication" type="button" onClick="$('#file-type2').click();" title="Import a previously exported file.">Import Application Save</button>
					<p>	Data can be imported and exported from and to the custom <b>.dir</b> format. This save can be loaded and used in other instances. The exported file is a JSON encoded plain text object and can be opened with any text editor.
					<p><button id="exportInterpretation" type="button" onClick="exportInterpretation()" title="Export your interpreted data">Export Interpreted Directions</button>
					<p> Export a table of the interpreted directions and negative poles of the fitted great circles. Great circle solutions can be downloaded form the chart illustrating the fitted directions.
			
					<h2> Other Options </h2>
					<p><button id="addSticky">Add Sticky</button><button id="removeSticky">Remove Stickies</button>
					<p> Click here to add a sticky component to the equal area projection. This component will be visible for all specimens and can be used to indicate a present day field component.
					<p> <input type="checkbox" id="labelFlag"><label for="labelFlag"><b> Show data labels for demagnetization steps</b> </label>
					<p> <input type="checkbox" id="originFlag"><label for="originFlag"><b> Include origin as point</b> </label>
					<p> <button id="showControls"> Show Controls </button>

					<h2> Reset Application </h2>
					<p><button id="clearStorage" type="button" onClick="clearStorage()" title="Clear local storage">Clear local storage</button>
					<p>	Clearing location storage will remove all saved sites and reload the application. Please remember to export your instance before resetting the application if you wish to save your data.
				</div>
			</div>

			<!-- DIRECTION FITTING TAB -->
			<div id="magicTab">
					<div class="information">
					<h1>Interpretation Portal: MagIC exporting </h1>
					<p> This module allows users to export a table that can be ingested to the MagIC database. Currently, we only provide functionality for parsing <b>raw demagnetization data</b> to the expect MagIC format. Interpretations can be shared through the Paleomagnetism.org application .dir files. Additional fields are required to be filled out by the user. It is the users responsibility the data is entered correctly.
					</div>
					<p><button id="magICexport" type="button" onClick="MagIC()" title="Export to MagIC format"> Format Raw Demagnetization Data to MagIC Table </button>
					<div id="magicDiv" style="display: none;">

					<table class="display compact" style="text-align: center; display: none;" id="magicTable">
					<thead>
						<tr> 
							<th colspan="4"> Site Information </th>
							<th colspan="8"> Sample Information </th>
						</tr>
						<tr>
							<!-- Site Info -->
							<th title="Site initials (text)"><u>Site Name</u></th>
							<th title="Site location (text)"><u>Location</u></th>
							<th><u>Latitude</u></th>
							<th><u>Longitude</u></th>
							
							<!-- Sample Info -->
							<th title="Sample initials (text)"><u>Sample</u></th>
							<th>Sample Azimuth</th>
							<th>Sample Dip</th>
							<th>Bedding Dip Direction</th>
							<th>Bedding Dip</th>
							<th><u>Class</u></th>
							<th><u>Lithology</u></th>
							<th><u>Type</u></th>
							
							<th title="Specimen indicator (text)"><u>Specimen</u></th>
							<th title="No clue what this is"><u>Synthetic Material Name</u></th>
							<th title="Type of experiment"><u>Experiment Name</u></th>
							<th title="Good (g) or bad (b) measurement"><u>Quality Flag</u></th>
							<th title="Standard (s) or unknown (u) measurement"><u>Standard Flag</u></th>
							<th title="Measurement identifier or lab number"><u>Measurement Number</u></th>
							<th title="list of method codes"><u>Method Codes</u></th>
							<th><u>Instrument Code</u></th>
							<th><u>Reference</u></th>
							<th>Number of Positions</th>
							<th>Elevation</th>
							<th>Stratigraphic Height</th>
							<th>Demag Temperature</th>
							<th>Demag Field </th>
							<th>Ambient Temperature</th>
							

						

							<!-- Measurement Info -->
							<th>Inclination</th>
							<th>Declination</th>
							<th>Magnetization Moment</th>
							<th>Magnetization Volume</th>
							<th>Software</th>
							<th>Analyst Names</th>
						</tr>
					</thead>
					<tfoot id="fillMe">
						<td class="magicFoot" name="0"> Edit All </td>
						<td class="magicFoot" name="1"> Edit All </td>
						<td class="magicFoot" name="2"> Edit All </td>
						<td class="magicFoot" name="3"> Edit All </td>
						<td class="magicFoot" name="4"> Edit All </td>
						<td class="magicFoot" name="5"> Edit All </td>
						<td class="magicFoot" name="6"> Edit All </td>
						<td class="magicFoot" name="7"> Edit All </td>
						<td class="magicFoot" name="8"> Edit All </td>
						<td class="magicFoot" name="9"> Edit All </td>
						<td class="magicFoot" name="10"> Edit All </td>
						<td class="magicFoot" name="11"> Edit All </td>
						<td class="magicFoot" name="12"> Edit All </td>
						<td class="magicFoot" name="13"> Edit All </td>
						<td class="magicFoot" name="14"> Edit All </td>
						<td class="magicFoot" name="15"> Edit All </td>
						<td class="magicFoot" name="16"> Edit All </td>
						<td class="magicFoot" name="17"> Edit All </td>
						<td class="magicFoot" name="18"> Edit All </td>
						<td class="magicFoot" name="19"> Edit All </td>
						<td class="magicFoot" name="20"> Edit All </td>
						<td class="magicFoot" name="21"> Edit All </td>
						<td class="magicFoot" name="22"> Edit All </td>
						<td class="magicFoot" name="23"> Edit All </td>
						<td class="magicFoot" name="24"> Edit All </td>
						<td class="magicFoot" name="25"> Edit All </td>
						<td class="magicFoot" name="26"> Edit All </td>
						<td class="magicFoot" name="27"> Edit All </td>
						<td class="magicFoot" name="28"> Edit All </td>
						<td class="magicFoot" name="29"> Edit All </td>
						<td class="magicFoot" name="30"> Edit All </td>
						<td class="magicFoot" name="31"> Edit All </td>
						<td class="magicFoot" name="32"> Edit All </td>
					</tfoot>

				</table>
			<p><button id="tableExport" type="button" onClick="exportTable()" title="Export to Excel Sheet"> Download table to Excel Sheet </button>

		<p><b> Underlined columns are REQUIRED by MagIC </b>
		<p> Sample name is split by special characters e.g. <b>Site.Sample.Specimen</b> or <b>Site-Sample-Specimen</b>. 
			</div>
			</div>
		</div>
		
		<hr>
			
		<div id="customHelpDialog" title="Custom Input Format" style="display: none;">
			<p><b>The default input format is specified below:</b></p>
			<p style="padding: 10px; border: 1px dotted rgb(119, 152, 191); font-family: monospace;">
			<br> Sample Name, Core Azimuth, Core Dip, Bedding Strike, Bedding Dip
			<br> Demagnetization Step, Declination, Inclination, Intensity, Error, Info
			<br> ...
			<br> 9999
			<br>
			</p>
			<p> <b> Note: </b> 9999 indicates the end of a single specimen. Multiple samples can be chained in the input and will be added to the application.
		</div>
		
		<!-- FOOTER -->
		<div id="footer" class="textplot" style="margin: 10px;">
			<small> © 2015 Paleomagnetism.org. Please <a href="./cite.html">cite</a> all contributors if you use this application for your research.
			<p><b>Disclaimer:</b> Paleomagnetism.org is an open-source initiative licensed under the <a href="https://www.gnu.org/licenses/gpl.html">GNU General Public License v3.0</a>. All data processing is handled on the client-side within your browser. Graph exporting is delivered via the Highcharts content delivery network under the Highcharts <a href="http://www.highcharts.com/docs/export-module/privacy-disclaimer/">exporting privacy policy</a>.
			<hr>
			<div style="text-align: right; display: inline-block;">
				<a href="http://www.geo.uu.nl/~forth/"><img style="margin: 0px; height: 60px;" src="./images/UU.png"></a>
				<a href="http://erc.europa.eu/"><img style="margin: 0px; height: 60px;" src="./images/ERC.png"></a>
				<a href="http://www.nwo.nl/"><img style="margin: 0px; height: 60px;" src="./images/logo NWO_plain.png"></a>
			</div>
		</div>
	</div>
</BODY>

</HTML>
